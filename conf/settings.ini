#!/system/bin/sh


# ==============================================================================
#                           Flux Settings Configuration
# ==============================================================================
# Note: Restart service after modifying this file
# Usage: These settings override defaults in flux.config
# ==============================================================================


# ==============================================================================
# [ Subscription ]
# ==============================================================================

SUBSCRIPTION_URL=""


# ==============================================================================
# [ Logging ]
# ==============================================================================

LOG_ENABLE=1                    # 0=Disable, 1=Enable
LOG_LEVEL=1                     # 0=Debug, 1=Info, 2=Warn, 3=Error
LOG_MAX_SIZE=1048576            # Max log size before rotation (bytes)


# ==============================================================================
# [ Timeouts ]
# ==============================================================================

CORE_TIMEOUT=10                 # Core start/stop timeout (seconds)
UPDATE_TIMEOUT=60               # Subscription download timeout (seconds)
RETRY_COUNT=3                   # Download retry count
UPDATE_INTERVAL=86400           # Auto-update interval (seconds, 86400=24h)


# ==============================================================================
# [ Routing ]
# ==============================================================================

ROUTING_MARK="2025"             # Fwmark for routing (empty=use OWNER match)


# ==============================================================================
# [ Ports ]
# ==============================================================================

PROXY_TCP_PORT="1536"           # TProxy TCP port
PROXY_UDP_PORT="1536"           # TProxy UDP port
DNS_PORT="1053"                 # DNS listener port


# ==============================================================================
# [ Proxy Mode ]
# ==============================================================================

PROXY_MODE=0                    # 0=Auto, 1=TProxy, 2=Redirect
DNS_HIJACK_ENABLE=1             # 0=Disable, 1=TProxy, 2=Redirect


# ==============================================================================
# [ Network Interfaces ]
# ==============================================================================

MOBILE_INTERFACE="rmnet_data+"  # Mobile data interface
WIFI_INTERFACE="wlan0"          # WiFi interface
HOTSPOT_INTERFACE="wlan2"       # Hotspot interface
USB_INTERFACE="rndis+"          # USB tethering interface


# ==============================================================================
# [ Proxy Scope ]
# ==============================================================================

# Interface proxy switches (0=Bypass, 1=Proxy)
PROXY_MOBILE=1
PROXY_WIFI=1
PROXY_HOTSPOT=0
PROXY_USB=0

# Protocol switches (0=Disable, 1=Enable)
PROXY_TCP=1
PROXY_UDP=1
PROXY_IPV6=0



# ==============================================================================
# [ Per-App Proxy ]
# ==============================================================================

APP_PROXY_ENABLE=0              # 0=Disable, 1=Enable
APP_PROXY_MODE=1                # 1=Blacklist, 2=Whitelist

# Package names - supports multi-line values in quotes
# Single line example:
#   PROXY_APPS_LIST="com.app1 com.app2"
#
# Multi-line example (newlines INSIDE quotes):
#   PROXY_APPS_LIST="com.google.android.youtube
#   com.twitter.android
#   com.instagram.android"
#
PROXY_APPS_LIST=""
BYPASS_APPS_LIST=""


# ==============================================================================
# [ China IP Bypass ]
# ==============================================================================

BYPASS_CN_IP=0                  # 0=Disable, 1=Enable

# Download sources (files stored in $RUN_DIR automatically)
CN_IP_URL="https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/CN-ip-cidr.txt"
CN_IPV6_URL="https://ispip.clang.cn/all_cn_ipv6.txt"


# ==============================================================================
# [ MAC Filter ] (Hotspot only)
# ==============================================================================

MAC_FILTER_ENABLE=0             # 0=Disable, 1=Enable
MAC_PROXY_MODE=1                # 1=Blacklist, 2=Whitelist

# MAC addresses (space-separated, format: AA:BB:CC:DD:EE:FF)
PROXY_MACS_LIST=""              # MACs to proxy (whitelist mode)
BYPASS_MACS_LIST=""             # MACs to bypass (blacklist mode)


# ==============================================================================
# [ Advanced Settings ]
# ==============================================================================

# Skip kernel feature check (use if /proc/config.gz is unavailable)
SKIP_CHECK_FEATURE=0            # 0=Check, 1=Skip
